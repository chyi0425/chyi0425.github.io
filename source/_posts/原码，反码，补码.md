---
title: 原码，反码，补码
date: 2018-07-22 21:19:49
tags: [Java,bit] #文章标签，多于一项时用这种格式
toc: true
---

## 机器数和真值

### 机器数
一个数在计算机中的二进制表示形式，叫做这个数的机器数。机器数是带符号的，在计算机用一个数的最高位存放符号，正数为0，负数为1。
比如，十进制中的数 +3，计算机字长为8位，转换成二进制就是 0000 0011。如果是-3，就是 1000 0011。
那么，这里的 0000 0011 和 1000 0011就是机器数。

### 真值

> 因为第一位是符号位，所以机器数的形式值就不等于真正的数值。例如上面的有符号数 1000 0011，其最高位1代表负，其真正的数值是-3 而不是形式值131（1000 0011转换成10进制等于131）。所以为区别起见，将带符号位的机器数对应的真正数值称为机器数的真值。

例如： 0000 0011的真值= +000 0001 = +1，1000 0011的真值是= -000 0001 = -1

## 原码，反码，补码的基础概念和计算方法
对于一个数，计算机要使用一定的编码方式进行存储。原码，反码，补码是机器存储一个具体数字的编码方式。

### 原码
原码就是符号位加上真值的绝对值，即用第一位表示符号，其余位表示值。比如如果是8位二进制：

> [+1]原 = 0000 0001
> [-1]原 = 1000 0001

第一位是符号位。因为第一位是符号位。所以8位二进制数的取值范围就是：

> [1111 1111, 0111 1111]

即

> [-127, 127]

原码是人脑最容易理解和计算的表示方式。

### 反码
反码的表示方法是：
正数的反码是其本身
负数的反码是在其原码的基础上，符号位不变，其余各个取反。

> [+1] = [0000 0001]原 = [0000 0001]反
> [-1] = [1000 0001]原 = [1111 1110]反

可见如果一个反码表示的是负数，人脑无法直观的看出来它的数值。通常要将其转换成原码再计算。

### 补码
补码的表示方法是：
正数的补码就是其本身
负数的补码是在其原码的基础上，符号位不变，其余各位取反，最后+1。（即在反码的基础上+1）

> [+1] = [0000 0001]原 = [0000 0001]反 = [0000 0001]补
> [-1] = [1000 0001]原 = [1111 1110]反 = [1111 1111]补
对于负数，补码表示方式也是人脑无法直观看出其数值的。通常也需要转换成原码在计算其数值。

## 为何要使用原码，反码和补码
现在我们知道了计算机可以有三种编码方式表示一个数。对于正数因为三种编码方式的结果都相同：

> [+1] = [0000 0001]原 = [0000 0001]反 = [0000 0001]补

但是对于负数：

> [-1] = [1000 0001]原 = [1111 1110]反 = [1111 1111]补

可见原码，反码，补码是完全不同的。既然原码才是被人脑直接识别并用于计算表示方式，为何还会有反码和补码呢？

首先，因为人脑可以知道第一位是符号位，在计算的时候我们会根据符号位，选择对其真值区域的加减。但是对于计算机，加减乘除已经是最基础的运算，要设计的尽量简单。计算机辨别“符号位”显然会让计算机的基础电路设计变得十分复杂！于是人们想出了将符号位也参与运算的方法。我们知道，根据运算法则减去一个正数等于加上一个负数，所以机器可以只有加法而没有减法，这样计算机运算的设计就更加简单了。

于是人们开始探索将符号位参与运算，并且只保留加法的方法。首先来看原码：
计算十进制的表达式：1-1=0

> 1 - 1 = 1 + (-1) = [0000 0001]原 + [1000 0001]原 = [1000 0010]原 = -2